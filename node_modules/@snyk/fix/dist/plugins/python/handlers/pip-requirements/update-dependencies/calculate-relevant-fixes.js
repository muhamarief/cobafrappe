"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateRelevantFixes = void 0;
const is_defined_1 = require("./is-defined");
function calculateRelevantFixes(requirements, updates, type) {
    const lowerCasedUpdates = {};
    const topLevelDeps = requirements
        .map(({ name }) => name && name.toLowerCase())
        .filter(is_defined_1.isDefined);
    Object.keys(updates).forEach((update) => {
        const { upgradeTo } = updates[update];
        const [pkgName] = update.split('@');
        const isTransitive = topLevelDeps.indexOf(pkgName.toLowerCase()) < 0;
        if (type === 'transitive-pins' ? isTransitive : !isTransitive) {
            lowerCasedUpdates[update.toLowerCase()] = upgradeTo.toLowerCase();
        }
    });
    return lowerCasedUpdates;
}
exports.calculateRelevantFixes = calculateRelevantFixes;
//# sourceMappingURL=calculate-relevant-fixes.js.map